<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="courses_list" name="Courses List">
        <t t-call="website.layout">
            <div class="oe_structure"/>
            <div class="oe_structure">
                <div class="container">
                    <h1>Daftar Mata Kuliah</h1>
                    <div class="row">
                        <t t-foreach="courses" t-as="course">
                            <div class="col-md-4 mb-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title" t-field="course.course_name"/>
                                        <p class="card-text" t-field="course.course_code"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
            <div class="oe_structure"/>
        </t>
    </template>

    <!-- Menu Data -->
    <record id="menu_courses" model="website.menu">
        <field name="name">Mata Kuliah</field>
        <field name="url">/mata-kuliah</field>
        <field name="parent_id" ref="website.main_menu"/>
        <field name="sequence">50</field>
    </record>
</odoo>
        <t t-call="website.layout">
            <div id="matakuliah_wrap" class="container">
                <!-- Header -->
                <div class="row mb-5 mt-4">
                    <div class="col-12">
                        <h1 class="mb-2">Daftar Mata Kuliah</h1>
                        <p class="text-muted">Kumpulan mata kuliah yang diampu dengan informasi lengkap dan silabus</p>
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <form method="get" action="/mata-kuliah/search" class="input-group">
                            <input type="text" name="q" class="form-control" placeholder="Cari mata kuliah..."/>
                            <button class="btn btn-primary" type="submit">
                                <i class="fa fa-search"></i> Cari
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Filter Tabs -->
                <div class="row mb-4">
                    <div class="col-12">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item">
                                <a href="/mata-kuliah" class="nav-link" t-att-class="'active' if not current_type else ''">
                                    Semua Mata Kuliah
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/mata-kuliah/tipe/teori" class="nav-link" t-att-class="'active' if current_type == 'teori' else ''">
                                    <i class="fa fa-book"></i> Teori
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/mata-kuliah/tipe/praktik" class="nav-link" t-att-class="'active' if current_type == 'praktik' else ''">
                                    <i class="fa fa-flask"></i> Praktik
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/mata-kuliah/tipe/seminar" class="nav-link" t-att-class="'active' if current_type == 'seminar' else ''">
                                    <i class="fa fa-users"></i> Seminar
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Courses Grid -->
                <div class="row">
                    <t t-if="courses">
                        <t t-foreach="courses" t-as="course">
                            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                                <div class="card course-card h-100 shadow-sm" style="transition: all 0.3s ease;">
                                    <!-- Card Header with Type Badge -->
                                    <div class="card-header bg-light" style="padding: 1rem;">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <span class="badge" t-att-class="'badge-info' if course.course_type == 'teori' else 'badge-success' if course.course_type == 'praktik' else 'badge-warning'">
                                                <t t-if="course.course_type == 'teori'">Teori</t>
                                                <t t-elif="course.course_type == 'praktik'">Praktik</t>
                                                <t t-elif="course.course_type == 'seminar'">Seminar</t>
                                                <t t-else=""><t t-esc="course.course_type"/></t>
                                            </span>
                                            <span class="badge badge-secondary">
                                                <t t-esc="course.credits"/> SKS
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Card Body -->
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <t t-esc="course.course_code"/> - <t t-esc="course.course_name"/>
                                        </h5>
                                        <p class="text-muted small">
                                            <i class="fa fa-folder"></i> <t t-esc="course.blog_id.name"/>
                                        </p>
                                        <p class="card-text text-truncate-lines" style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                            <t t-if="course.course_description">
                                                <t t-raw="course.course_description"/>
                                            </t>
                                            <t t-else="">
                                                Tidak ada deskripsi tersedia.
                                            </t>
                                        </p>
                                    </div>

                                    <!-- Card Footer -->
                                    <div class="card-footer bg-white border-top">
                                        <a t-attf-href="/mata-kuliah/#{course.slug}" class="btn btn-sm btn-outline-primary w-100">
                                            <i class="fa fa-arrow-right"></i> Lihat Detail
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </t>
                    <t t-else="">
                        <div class="col-12">
                            <div class="alert alert-info" role="alert">
                                <i class="fa fa-info-circle"></i> Tidak ada mata kuliah yang ditemukan.
                            </div>
                        </div>
                    </t>
                </div>

                <!-- Additional Info -->
                <div class="row mt-5 pt-4 border-top">
                    <div class="col-12">
                        <h4>Informasi Penting</h4>
                        <ul class="list-unstyled">
                            <li><i class="fa fa-check text-success"></i> Semua mata kuliah dirancang dengan kurikulum terkini</li>
                            <li><i class="fa fa-check text-success"></i> Tersedia silabus lengkap dan materi pembelajaran</li>
                            <li><i class="fa fa-check text-success"></i> Didukung dengan praktik dan studi kasus nyata</li>
                        </ul>
                    </div>
                </div>
            </div>

            <style>
                .course-card {
                    border: none;
                    border-radius: 8px;
                }
                .course-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 4px 15px rgba(0,0,0,0.15) !important;
                }
                .card-header {
                    border-bottom: 1px solid #e0e0e0;
                }
                #matakuliah_wrap {
                    padding: 20px 0;
                }
            </style>
        </t>
    </template>

    <!-- ===== HALAMAN DETAIL MATA KULIAH ===== -->
    <template id="matakuliah_detail_template" name="Detail Mata Kuliah">
        <t t-call="website.layout">
            <div id="matakuliah_detail_wrap" class="container">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mt-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/mata-kuliah">Mata Kuliah</a></li>
                        <li class="breadcrumb-item active" t-att-aria-current="page">
                            <t t-esc="course.course_code"/>
                        </li>
                    </ol>
                </nav>

                <div class="row mt-4">
                    <!-- Main Content -->
                    <div class="col-lg-8">
                        <!-- Header -->
                        <div class="mb-5">
                            <div class="d-flex gap-2 mb-3">
                                <span class="badge" t-att-class="'badge-info' if course.course_type == 'teori' else 'badge-success' if course.course_type == 'praktik' else 'badge-warning'">
                                    <t t-if="course.course_type == 'teori'">Teori</t>
                                    <t t-elif="course.course_type == 'praktik'">Praktik</t>
                                    <t t-elif="course.course_type == 'seminar'">Seminar</t>
                                    <t t-else=""><t t-esc="course.course_type"/></t>
                                </span>
                                <span class="badge badge-secondary"><t t-esc="course.credits"/> SKS</span>
                                <span class="badge" t-att-class="'badge-danger' if course.status_course == 'wajib' else 'badge-warning'">
                                    <t t-if="course.status_course == 'wajib'">Wajib</t>
                                    <t t-elif="course.status_course == 'pilihan'">Pilihan</t>
                                    <t t-else=""><t t-esc="course.status_course"/></t>
                                </span>
                            </div>
                            <h1 class="mb-2">
                                <t t-esc="course.course_code"/> - <t t-esc="course.course_name"/>
                            </h1>
                            <p class="text-muted lead" t-if="course.course_english_name">
                                <em><t t-esc="course.course_english_name"/></em>
                            </p>
                            <p class="text-muted">
                                <i class="fa fa-folder"></i> <t t-esc="course.blog_id.name"/>
                                <span class="mx-2">|</span>
                                <i class="fa fa-calendar"></i> Semester <t t-esc="course.semester_offered"/>
                            </p>
                        </div>

                        <!-- Main Tabs -->
                        <ul class="nav nav-tabs mb-4" role="tablist">
                            <li class="nav-item"><a class="nav-link active" href="#overview" data-toggle="tab">Gambaran Umum</a></li>
                            <li class="nav-item"><a class="nav-link" href="#learning" data-toggle="tab">Pembelajaran</a></li>
                            <li class="nav-item"><a class="nav-link" href="#content" data-toggle="tab">Konten</a></li>
                            <li class="nav-item"><a class="nav-link" href="#assessment" data-toggle="tab">Penilaian</a></li>
                            <li class="nav-item"><a class="nav-link" href="#info" data-toggle="tab">Informasi</a></li>
                        </ul>

                        <div class="tab-content">
                            <!-- Tab 1: Overview -->
                            <div id="overview" class="tab-pane fade show active">
                                <div class="card mb-4">
                                    <div class="card-body">
                                        <h5 class="card-title">Deskripsi Mata Kuliah</h5>
                                        <div class="card-text" t-if="course.course_description">
                                            <t t-raw="course.course_description"/>
                                        </div>
                                        <p t-else="">Tidak ada deskripsi tersedia.</p>
                                    </div>
                                </div>

                                <t t-if="course.prerequisites">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Prasyarat</h5>
                                            <p><t t-esc="course.prerequisites"/></p>
                                        </div>
                                    </div>
                                </t>
                            </div>

                            <!-- Tab 2: Learning -->
                            <div id="learning" class="tab-pane fade">
                                <t t-if="course.course_objectives">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Tujuan Pembelajaran Umum (TPU)</h5>
                                            <div class="card-text">
                                                <t t-raw="course.course_objectives"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.learning_outcomes">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Capaian Pembelajaran (Learning Outcomes)</h5>
                                            <div class="card-text">
                                                <t t-raw="course.learning_outcomes"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.learning_methods">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Metode Pembelajaran</h5>
                                            <div class="card-text">
                                                <t t-raw="course.learning_methods"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>

                            <!-- Tab 3: Content -->
                            <div id="content" class="tab-pane fade">
                                <t t-if="course.course_content">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Silabus Mata Kuliah</h5>
                                            <div class="card-text">
                                                <t t-raw="course.course_content"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.required_textbooks">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Referensi Wajib</h5>
                                            <div class="card-text">
                                                <t t-raw="course.required_textbooks"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.recommended_books">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Referensi Tambahan</h5>
                                            <div class="card-text">
                                                <t t-raw="course.recommended_books"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>

                            <!-- Tab 4: Assessment -->
                            <div id="assessment" class="tab-pane fade">
                                <t t-if="course.assessment_methods">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Metode Penilaian</h5>
                                            <div class="card-text">
                                                <t t-raw="course.assessment_methods"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.assessment_components">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Komponen Penilaian</h5>
                                            <div class="card-text">
                                                <t t-raw="course.assessment_components"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="course.grading_scale">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Skala Penilaian</h5>
                                            <div class="card-text">
                                                <t t-raw="course.grading_scale"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>

                            <!-- Tab 5: Information -->
                            <div id="info" class="tab-pane fade">
                                <div class="card mb-4">
                                    <div class="card-body">
                                        <h5 class="card-title">Informasi Jadwal</h5>
                                        <table class="table table-sm">
                                            <tbody>
                                                <tr t-if="course.day_of_week">
                                                    <th>Hari:</th>
                                                    <td>
                                                        <t t-if="course.day_of_week == 'monday'">Senin</t>
                                                        <t t-elif="course.day_of_week == 'tuesday'">Selasa</t>
                                                        <t t-elif="course.day_of_week == 'wednesday'">Rabu</t>
                                                        <t t-elif="course.day_of_week == 'thursday'">Kamis</t>
                                                        <t t-elif="course.day_of_week == 'friday'">Jumat</t>
                                                        <t t-elif="course.day_of_week == 'saturday'">Sabtu</t>
                                                        <t t-elif="course.day_of_week == 'sunday'">Minggu</t>
                                                    </td>
                                                </tr>
                                                <tr t-if="course.start_time">
                                                    <th>Waktu:</th>
                                                    <td><t t-esc="course.start_time"/> - <t t-esc="course.end_time"/></td>
                                                </tr>
                                                <tr t-if="course.classroom">
                                                    <th>Ruang:</th>
                                                    <td><t t-esc="course.classroom"/></td>
                                                </tr>
                                                <tr t-if="course.capacity">
                                                    <th>Kapasitas:</th>
                                                    <td><t t-esc="course.capacity"/> orang</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <t t-if="course.instructor_email or course.instructor_phone or course.office_hours">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h5 class="card-title">Kontak Instruktur</h5>
                                            <t t-if="course.instructor_email">
                                                <p><strong>Email:</strong> <a t-attf-href="mailto:#{course.instructor_email}"><t t-esc="course.instructor_email"/></a></p>
                                            </t>
                                            <t t-if="course.instructor_phone">
                                                <p><strong>Telepon:</strong> <t t-esc="course.instructor_phone"/></p>
                                            </t>
                                            <t t-if="course.office_hours">
                                                <p><strong>Jam Konsultasi:</strong></p>
                                                <div>
                                                    <t t-raw="course.office_hours"/>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="col-lg-4">
                        <!-- Action Cards -->
                        <div class="card mb-4 sticky-top" style="top: 20px;">
                            <div class="card-body">
                                <h5 class="card-title">Aksi Cepat</h5>

                                <!-- Download Silabus -->
                                <t t-if="course.course_syllabus_file">
                                    <a t-attf-href="/mata-kuliah/#{course.slug}/download-silabus" class="btn btn-primary w-100 mb-2">
                                        <i class="fa fa-download"></i> Download Silabus
                                    </a>
                                </t>

                                <!-- Back Button -->
                                <a href="/mata-kuliah" class="btn btn-outline-secondary w-100">
                                    <i class="fa fa-arrow-left"></i> Kembali ke Daftar
                                </a>
                            </div>
                        </div>

                        <!-- Course Info Card -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="card-title mb-0">Ringkasan Mata Kuliah</h5>
                            </div>
                            <div class="card-body">
                                <table class="table table-borderless table-sm">
                                    <tbody>
                                        <tr>
                                            <th>Kode:</th>
                                            <td><strong><t t-esc="course.course_code"/></strong></td>
                                        </tr>
                                        <tr>
                                            <th>SKS:</th>
                                            <td><t t-esc="course.credits"/> SKS</td>
                                        </tr>
                                        <tr>
                                            <th>Tipe:</th>
                                            <td>
                                                <t t-if="course.course_type == 'teori'">Teori</t>
                                                <t t-elif="course.course_type == 'praktik'">Praktik</t>
                                                <t t-elif="course.course_type == 'seminar'">Seminar</t>
                                                <t t-else=""><t t-esc="course.course_type"/></t>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Status:</th>
                                            <td>
                                                <t t-if="course.status_course == 'wajib'">Wajib</t>
                                                <t t-elif="course.status_course == 'pilihan'">Pilihan</t>
                                                <t t-else=""><t t-esc="course.status_course"/></t>
                                            </td>
                                        </tr>
                                        <tr t-if="course.semester_offered">
                                            <th>Semester:</th>
                                            <td><t t-esc="course.semester_offered"/></td>
                                        </tr>
                                        <tr t-if="course.minimum_grade">
                                            <th>Min. Nilai:</th>
                                            <td><t t-esc="course.minimum_grade"/></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Share Card -->
                        <div class="card">
                            <div class="card-header bg-light">
                                <h5 class="card-title mb-0">Bagikan</h5>
                            </div>
                            <div class="card-body">
                                <a href="javascript:void(0)" class="btn btn-sm btn-outline-primary" onclick="sharePage('facebook')">
                                    <i class="fa fa-facebook"></i> Facebook
                                </a>
                                <a href="javascript:void(0)" class="btn btn-sm btn-outline-primary" onclick="sharePage('twitter')">
                                    <i class="fa fa-twitter"></i> Twitter
                                </a>
                                <a href="javascript:void(0)" class="btn btn-sm btn-outline-primary" onclick="sharePage('email')">
                                    <i class="fa fa-envelope"></i> Email
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Related Courses -->
                <div class="row mt-5 pt-4 border-top">
                    <div class="col-12">
                        <h4 class="mb-4">Mata Kuliah Terkait</h4>
                    </div>
                    <t t-set="related_courses" t-value="request.env['matakuliah.post'].sudo().search([('blog_id', '=', course.blog_id.id), ('id', '!=', course.id), ('website_published', '=', True)], limit=3)"/>
                    <t t-if="related_courses">
                        <t t-foreach="related_courses" t-as="related">
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 shadow-sm">
                                    <div class="card-body">
                                        <h6 class="card-title"><t t-esc="related.course_code"/></h6>
                                        <p class="card-text text-muted small"><t t-esc="related.course_name"/></p>
                                        <a t-attf-href="/mata-kuliah/#{related.slug}" class="btn btn-sm btn-outline-primary">
                                            Lihat
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </t>
                    <t t-else="">
                        <div class="col-12">
                            <p class="text-muted">Tidak ada mata kuliah terkait.</p>
                        </div>
                    </t>
                </div>
            </div>

            <style>
                #matakuliah_detail_wrap {
                    padding: 20px 0;
                }
                .nav-tabs .nav-link {
                    color: #666;
                    border-bottom: 3px solid transparent;
                }
                .nav-tabs .nav-link.active {
                    color: #007bff;
                    border-bottom: 3px solid #007bff;
                    background-color: transparent;
                }
                .card {
                    border-radius: 8px;
                    border: 1px solid #e0e0e0;
                }
                .sticky-top {
                    z-index: 1000;
                }
            </style>

            <script>
                function sharePage(platform) {
                    var url = window.location.href;
                    var title = document.title;
                    
                    if (platform === 'facebook') {
                        window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url), '_blank', 'width=600,height=400');
                    } else if (platform === 'twitter') {
                        window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&amp;text=' + encodeURIComponent(title), '_blank', 'width=600,height=400');
                    } else if (platform === 'email') {
                        window.location.href = 'mailto:?subject=' + encodeURIComponent(title) + '&amp;body=' + encodeURIComponent(url);
                    }
                }
            </script>
        </t>
    </template>
    </data>
</odoo>